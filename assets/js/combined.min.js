/*! Roman Korol Website - Combined JS */
(function($){var $window=$(window),$body=$('body');breakpoints({xlarge:['1281px','1680px'],large:['981px','1280px'],medium:['737px','980px'],small:[null,'736px']});$window.on('load',function(){window.setTimeout(function(){$body.removeClass('is-preload');},100);});$('#nav > ul').dropotron({mode:'fade',noOpenerFade:true,hoverDelay:150,hideDelay:350});$('<div id="titleBar"><a href="#navPanel" class="toggle"></a></div>').appendTo($body);$('<div id="navPanel"><nav>'+$('#nav').navList()+'</nav></div>').appendTo($body).panel({delay:500,hideOnClick:true,hideOnSwipe:true,resetScroll:true,resetForms:true,side:'left',target:$body,visibleClass:'navPanel-visible'});})(jQuery);

/* Modal functionality */
(function(){function setupModals(){// Find all modal buttons
var modal_buttons=document.querySelectorAll('.myBtn_multi');console.log('Setting up modals. Found',modal_buttons.length,'buttons');modal_buttons.forEach(function(button,index){// Find the modal associated with this button - look in the parent container
var container=button.closest('div,article');var modal=null;if(container){modal=container.querySelector('.modal.modal_multi');}if(modal){// Set up unique identifiers
button.setAttribute('data-modal-id','modal-'+index);modal.setAttribute('data-modal-id','modal-'+index);// Set up click handler for button
button.onclick=function(e){e.preventDefault();console.log('Button clicked for modal',index);openModal(modal);};// Set up close button
var closeBtn=modal.querySelector('.close_multi');if(closeBtn){closeBtn.onclick=function(){closeModal(modal);};}console.log('Modal',index,'set up successfully - button:',button.src,'modal has content:',!!modal.querySelector('img'));}else{console.warn('No modal found for button',index,'Container:',container,'Button src:',button.src);}});}function openModal(modal){console.log('Opening modal:',modal);if(modal){var modalContent=modal.querySelector('.modal-content');var modalImage=modal.querySelector('img');console.log('Modal content found:',modalContent);console.log('Modal image found:',modalImage);console.log('Modal innerHTML:',modal.innerHTML);modal.style.display="block";modal.classList.add('show');modal.classList.remove('hide');document.body.style.overflow='hidden';console.log('Modal opened successfully');}}function closeModal(modal){if(modal){modal.classList.add('hide');modal.classList.remove('show');setTimeout(function(){modal.style.display="none";document.body.style.overflow='auto';},300);}}// Initial setup
document.addEventListener('DOMContentLoaded',setupModals);window.onload=setupModals;// Make setup available globally for unhide function
window.reindexModals=setupModals;// Click outside to close
window.onclick=function(event){if(event.target.classList.contains('modal_multi')){closeModal(event.target);}};// Escape key to close
document.addEventListener('keydown',function(event){if(event.key==='Escape'){var openModal=document.querySelector('.modal_multi[style*="display: block"],.modal_multi.show');if(openModal){closeModal(openModal);}}});})();

/* Accessibility enhancements */
function makeKeyboardAccessible(){var clickableElements=document.querySelectorAll('[onclick]');for(var i=0;i<clickableElements.length;i++){clickableElements[i].setAttribute('tabindex','0');clickableElements[i].addEventListener('keypress',function(e){if(e.key==='Enter'||e.key===' '){e.preventDefault();this.click();}});}}document.addEventListener('DOMContentLoaded',makeKeyboardAccessible);

/* Unhide functionality */
function unhide(divID){var item=document.getElementById(divID);if(item){item.className=(item.className=='hidden')?'unhidden':'hidden';// Re-index modals after unhiding content to include newly visible modal elements
if(item.className==='unhidden'&&window.reindexModals){setTimeout(window.reindexModals,100);}}}

/* Dark Theme Toggle */
(function(){"use strict";console.log('Dark theme script loading...');const THEMES={LIGHT:"light",DARK:"dark",AUTO:"auto"};const STORAGE_KEY="korolgroup-theme";function getSystemTheme(){return window.matchMedia("(prefers-color-scheme: dark)").matches?THEMES.DARK:THEMES.LIGHT}function getSavedTheme(){try{return localStorage.getItem(STORAGE_KEY)||THEMES.LIGHT}catch(e){return THEMES.LIGHT}}function saveTheme(theme){try{localStorage.setItem(STORAGE_KEY,theme)}catch(e){console.warn("Unable to save theme preference")}}function applyTheme(theme){const html=document.documentElement;html.removeAttribute("data-theme");if(theme!==THEMES.AUTO){html.setAttribute("data-theme",theme)}updateToggleButton(theme);window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:theme,effectiveTheme:getEffectiveTheme(theme)}}))}function getEffectiveTheme(selectedTheme){if(selectedTheme===THEMES.AUTO){return getSystemTheme()}return selectedTheme}function cycleTheme(){const currentTheme=getSavedTheme();let nextTheme;if(currentTheme===THEMES.DARK){nextTheme=THEMES.LIGHT}else{nextTheme=THEMES.DARK}saveTheme(nextTheme);applyTheme(nextTheme)}function createToggleButton(){const button=document.createElement("button");button.className="theme-toggle";button.setAttribute("aria-label","Toggle color theme");button.setAttribute("title","Toggle between light, dark, and auto themes");button.style.cssText=`position:absolute;top:20px;right:20px;z-index:1000;background:var(--toggle-bg,rgba(255,255,255,0.9));border:2px solid var(--toggle-border,#ddd);border-radius:50%;width:48px;height:48px;cursor:pointer;font-size:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Color Emoji","Apple Color Emoji","Segoe UI Emoji",system-ui,sans-serif;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:0 2px 10px rgba(0,0,0,0.1);`;button.addEventListener("mouseenter",()=>{button.style.transform="scale(1.1)"});button.addEventListener("mouseleave",()=>{button.style.transform="scale(1)"});button.addEventListener("click",cycleTheme);button.addEventListener("keydown",(e)=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();cycleTheme()}});return button}function updateToggleButton(theme){const button=document.querySelector(".theme-toggle");if(!button)return;let icon,title;if(theme===THEMES.DARK){icon="🌙";title="Dark theme active. Click for light theme."}else{icon="☀️";title="Light theme active. Click for dark theme."}button.textContent=icon;button.setAttribute("title",title);button.setAttribute("aria-label",title)}function addToggleStyles(){const style=document.createElement("style");style.textContent=`.theme-toggle{--toggle-bg:rgba(255,255,255,0.9);--toggle-border:#ddd;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Color Emoji","Apple Color Emoji","Segoe UI Emoji",system-ui,sans-serif;}[data-theme="dark"] .theme-toggle{--toggle-bg:rgba(42,42,42,0.9);--toggle-border:#444;color:#e0e0e0;}@media (prefers-color-scheme:dark){html:not([data-theme="light"]) .theme-toggle{--toggle-bg:rgba(42,42,42,0.9);--toggle-border:#444;color:#e0e0e0;}}.theme-toggle:focus{outline:2px solid #4a9eff;outline-offset:2px;}.theme-toggle:active{transform:scale(0.95) !important;}@media (max-width:768px){.theme-toggle{top:10px;right:10px;width:40px;height:40px;font-size:16px;}}@media print{.theme-toggle{display:none !important;}}`;document.head.appendChild(style)}function setupSystemThemeListener(){if(window.matchMedia){const mediaQuery=window.matchMedia("(prefers-color-scheme: dark)");mediaQuery.addEventListener("change",()=>{const currentTheme=getSavedTheme();if(currentTheme===THEMES.AUTO){applyTheme(THEMES.AUTO)}})}}function initTheme(){addToggleStyles();const savedTheme=getSavedTheme();applyTheme(savedTheme);const toggleButton=createToggleButton();document.body.appendChild(toggleButton);setupSystemThemeListener();updateToggleButton(savedTheme)}window.ThemeToggle={getTheme:getSavedTheme,setTheme:function(theme){if(Object.values(THEMES).includes(theme)){saveTheme(theme);applyTheme(theme)}},cycleTheme:cycleTheme,getEffectiveTheme:function(){return getEffectiveTheme(getSavedTheme())},THEMES:THEMES};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initTheme)}else{initTheme}})();